<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Sign up - Students</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;200;600;200&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="centered-page">
    <div style="width:100%; max-width:720px;">
      <div class="form-card">
        <form class="form-pills">
          <input class="pill-input" name="nombre" type="text" placeholder="Nombre" required>
          <input class="pill-input" name="apellido" type="text" placeholder="Apellido" required>
          <input class="pill-input" name="telefono" type="tel" placeholder="Telefono">
          <input class="pill-input" name="matricula" type="text" placeholder="Matricula">
          <input class="pill-input" name="cuatrimestre" type="text" placeholder="Cuatrimestre">
          <input class="pill-input" name="correo" type="email" placeholder="Correo" required>
          <input class="pill-input" name="contrasena" type="password" placeholder="Contrase침a" required>
          <div class="submit-row"><button class="submit-btn" type="submit">Crear cuenta</button></div>
        </form>
      </div>
    </div>
  </div>
    <script>
      (function(){
        var form = document.querySelector('.form-pills');
        if (!form) return;

        // peque침o toast/confirmaci칩n
        var toast = document.createElement('div');
        toast.textContent = 'Cuenta creada';
        toast.style.cssText = 'position:fixed;left:50%;top:18px;transform:translateX(-50%);background:#f2c1c2;color:#3b0709;padding:10px 18px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.12);display:none;z-index:9999;font-weight:700;font-family:inherit;';
        document.body.appendChild(toast);

        form.addEventListener('submit', async function(e){
          e.preventDefault();
          // recolectar datos del formulario
          var formData = new FormData(form);
          var nombre = formData.get('nombre') || '';
          var apellido = formData.get('apellido') || '';
          var telefono = formData.get('telefono') || '';
          var matricula = formData.get('matricula') || '';
          var cuatrimestre = formData.get('cuatrimestre') || '';
          var correo = formData.get('correo') || '';
          var contrasena = formData.get('contrasena') || '';

          var payload = {
            name: (nombre || '').trim(),
            apellido: (apellido || '').trim(),
            telefono: (telefono || '').trim(),
            matricula: (matricula || '').trim(),
            cuatrimestre: (cuatrimestre || '').trim(),
            email: correo,
            password: contrasena
          };

          try {
            var res = await fetch('http://localhost:3000/signup', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(payload)
            });
            var data = await res.json();
            if (!res.ok) {
              alert(data.error || 'Error al crear la cuenta');
              return;
            }
            // mostrar confirmaci칩n breve y luego redirigir
            toast.style.display = 'block';
            setTimeout(function(){
              toast.style.display = 'none';
              window.location.href = 'login.html';
            }, 900);
          } catch (err) {
            console.error('Signup error', err);
            alert('Error conectando al servidor');
          }
        });
      })();
    </script>
</body>
</html>
