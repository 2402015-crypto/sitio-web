<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inicio Donador - Bocaditos</title>
  <link rel="stylesheet" href="css/styles.css">
  <script src="js/donador.js" defer></script>
</head>
<body class="donador-panel">
  <div class="donor-layout">
    <nav class="donor-nav">
      <div class="brand">Bocaditos</div>
      <ul>
        <li class="active">Inicio</li>
        <li>Donaciones</li>
      </ul>
      <div class="chat">CHAT</div>
    </nav>

    <main class="donor-main">
      <section class="donor-card">
        <div class="donor-header">DONADOR</div>
        <div class="avatar-wrap">
          <img src="assets/piña.png" alt="avatar" class="avatar">
        </div>
        <div class="status-buttons">
          <span class="status active">Activo</span>
          <span class="status inactive">Baja</span>
        </div>
        <button class="btn-logout" onclick="logout()">Cerrar Sesión</button>

        <h3>Información del donador</h3>
        <div class="info-grid">
          <div><strong>Nombre:</strong></div><div id="donor-name">-</div>
          <div><strong>Número:</strong></div><div id="donor-phone">-</div>
          <div><strong>Correo:</strong></div><div id="donor-email">-</div>
          <div><strong>RFC:</strong></div><div id="donor-rfc">-</div>
          <div><strong>Ubicación:</strong></div><div id="donor-location">-</div>
        </div>
      </section>

      <section class="donation-detail">
        <div class="detail-card">
          <div class="detail-title">DETALLE DE DONACIÓN</div>
          <form class="detail-form">
            <label>Nombre de producto<input type="text" value="yogurt natural"></label>
            <label>Tipo de producto<input type="text" value="Lácteo"></label>
            <label>Fecha de caducidad<input type="text" placeholder="dd-mm-aaaa" value="22-oct-2026"></label>
            <label>Cantidad<input type="number" value="25"></label>
            <label>Destino<input type="text" value="UT riviera maya"></label>
            <label>Fecha de salida<input type="text" placeholder="dd/mm/aaaa"></label>
            <label>Fecha de llegada<input type="text" placeholder="dd/mm/aaaa"></label>
            <div class="detail-actions"><button type="button" class="save-btn">Guardar</button></div>
            </form>
          </div>
        </section>
      </main>
    </div>
    <script>
      // Cargar perfil de donador desde localStorage
      document.addEventListener('DOMContentLoaded', function(){
        try{
          var raw = localStorage.getItem('bocaditos_donor_profile');
          if (raw) {
            var p = JSON.parse(raw);
            document.getElementById('donor-name').textContent = p.razon || '-';
            document.getElementById('donor-phone').textContent = p.telefono || '-';
            document.getElementById('donor-email').textContent = p.correo || '-';
            document.getElementById('donor-rfc').textContent = p.rfc || '-';
            document.getElementById('donor-location').textContent = p.ubicacion || '-';
          }
        }catch(e){console.error(e)}

        // Guardar detalle de donación en localStorage (simulado)
        var saveBtn = document.querySelector('.save-btn');
        if (saveBtn) {
          saveBtn.addEventListener('click', function(){
            var form = document.querySelector('.detail-form');
            var data = {};
            Array.from(form.elements).forEach(function(el){ if (el.tagName && el.tagName.toLowerCase()==='input'){
                var label = el.closest('label');
                var key = (label && label.firstChild && label.firstChild.textContent || el.name || el.placeholder).trim().toLowerCase().replace(/\s+/g,'_');
                data[key] = el.value;
              }
            });
            try{ var arr = JSON.parse(localStorage.getItem('bocaditos_donor_donations')||'[]'); arr.push({data:data,ts:Date.now()}); localStorage.setItem('bocaditos_donor_donations', JSON.stringify(arr)); alert('Donación guardada localmente'); }catch(e){console.error(e); alert('Error al guardar'); }
          });
        }
      });
    </script>
</body>
</html>